<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <style>

    div.container h1{
      padding-top: 20px;
      font-size: 24px;
    }

    div.container{
      padding-bottom: 20px;
    }

    div.container h2{
      font-size: 20px;
    }

    a{
      cursor: pointer;
    }

  </style>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.2/papaparse.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>

</head>

<body>

  <script>
    function exibeResultado(data) {
      $('#resultados').replaceWith(arrayToTable(Papa.parse(data).data));
      location.href = "#resultados";
    }

    function arrayToTable(tableData) {
      var table = $('</h3> <table id="resultados"class="table"></table>');
      $(tableData).each(function (i, rowData) {
        var row = $('<tr></tr>');
        $(rowData).each(function (j, cellData) {
          row.append($('<td>' + cellData + '</td>'));
        });
        table.append(row);
      });
      return table;
    }
    function obterNumeroPublicacoesEmConferenciaEArea(area, conferencia) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterNumeroPublicacoesEmConferenciaEArea?area=" + area + "&conferencia=" + conferencia,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterNumeroPublicacoesEmArea(area) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterNumeroPublicacoesEmArea?area=" + area,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterScoresEmArea(area) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterScoresEmArea?area=" + area,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterScoreEmAreaEDepartamento(area, departamento) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterScoreEmAreaEDepartamento?area=" + area + "&departamento=" + departamento,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterNumerosProfessoresEmArea(area) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterNumerosProfessoresEmArea?area=" + area,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterNumeroProfessoresEmAreaEDepartamento(area, departamento) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterNumeroProfessoresEmAreaEDepartamento?area=" + area + "&departamento=" + departamento,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterPapersEmArea(area) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterPapersEmArea?area=" + area,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterPapersEmAreaEmAno(area, ano) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterPapersEmAreaEmAno?area=" + area + "&ano=" + ano,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterPapersEmAreaEmDepartamento(area, departamento) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterPapersEmAreaEmDepartamento?area=" + area + "&departamento=" + departamento,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

    function obterPapersDeProfessor(professor) {
      $.ajax({
        type: "GET",
        url: "http://127.0.0.1:5000/obterPapersDeProfessor?professor=" + professor,
        success: function (data) {
          exibeResultado(data);
        }
      });
    }

  </script>
  <div class="container">
    <h1 align="center">Trabalho prático 1 da disciplina ES2</h1>
    <div>
      <h2>Escolha um serviço:</h2>

      <div id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                1. Número de publicações em uma determinada conferência de uma área
              </button>
            </h5>
          </div>
      
          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
              <span>Selecione uma das opções:</span><br>
              <a onClick="obterNumeroPublicacoesEmConferenciaEArea('ai', 'GECCO')">área "ai", conferência "GECCO"</a><br>
              <a onClick="obterNumeroPublicacoesEmConferenciaEArea('arch', 'HPCA')">área "arch", conferência "HPCA"</a><br> 
              <a onClick="obterNumeroPublicacoesEmConferenciaEArea('chi', 'INTERACT')">área "chi", conferência "INTERACT"</a>   
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                2. Número de publicações no conjunto de conferências de uma área
              </button>
            </h5>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterNumeroPublicacoesEmArea('ai')">área "ai"</a><br>
                <a onClick="obterNumeroPublicacoesEmArea('arch')">área "arch"</a><br> 
                <a onClick="obterNumeroPublicacoesEmArea('chi')">área "chi"</a>   
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingThree">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                3. Scores de todos os departamentos em uma área
              </button>
            </h5>
          </div>
          <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterScoresEmArea('ai')">área "ai"</a><br>
                <a onClick="obterScoresEmArea('arch')">área "arch"</a><br> 
                <a onClick="obterScoresEmArea('chi')">área "chi"</a>     
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading4">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                4. Score de um determinado departamento em uma área
              </button>
            </h5>
          </div>
          <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterScoreEmAreaEDepartamento('ai', 'UFMG')">área "ai", departamento "UFMG"</a><br>
                <a onClick="obterScoreEmAreaEDepartamento('arch', 'UFMG')">área "arch", departamento "UFMG"</a><br> 
                <a onClick="obterScoreEmAreaEDepartamento('chi', 'UFMG')">área "chi", departamento "UFMG"</a>  
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading5">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                5. Número de professores que publicam em uma determinada área (organizados por departamentos)
              </button>
            </h5>
          </div>
          <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterNumerosProfessoresEmArea('ai')">área "ai"</a><br>
                <a onClick="obterNumerosProfessoresEmArea('arch')">área "arch"</a><br> 
                <a onClick="obterNumerosProfessoresEmArea('chi')">área "chi"</a>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading6">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
                6. Número de professores de um determinado departamento que publicam em uma área
              </button>
            </h5>
          </div>
          <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterNumeroProfessoresEmAreaEDepartamento('ai', 'UFMG')">área "ai", departamento "UFMG"</a><br>
                <a onClick="obterNumeroProfessoresEmAreaEDepartamento('arch', 'UFMG')">área "arch", departamento "UFMG"</a><br> 
                <a onClick="obterNumeroProfessoresEmAreaEDepartamento('chi', 'UFMG')">área "chi", departamento "UFMG"</a> 
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading7">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse7" aria-expanded="false" aria-controls="collapse7">
                7. Todos os papers de uma área (ano, título, deptos e autores)
              </button>
            </h5>
          </div>
          <div id="collapse7" class="collapse" aria-labelledby="heading7" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterPapersEmArea('ai')">área "ai"</a><br>
                <a onClick="obterPapersEmArea('arch')">área "arch"</a><br> 
                <a onClick="obterPapersEmArea('chi')">área "chi"</a>  
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading8">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse8" aria-expanded="false" aria-controls="collapse8">
                8. Todos os papers de uma área em um determinado ano
              </button>
            </h5>
          </div>
          <div id="collapse8" class="collapse" aria-labelledby="heading8" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterPapersEmAreaEmAno('ai', '2017')">área "ai", ano "2017"</a><br>
                <a onClick="obterPapersEmAreaEmAno('arch', '2017')">área "arch", ano "2017"</a><br> 
                <a onClick="obterPapersEmAreaEmAno('chi', '2017')">área "chi", ano "2017"</a>            
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading9">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse9" aria-expanded="false" aria-controls="collapse9">
                9. Todos os papers de um departamento em uma área
              </button>
            </h5>
          </div>
          <div id="collapse9" class="collapse" aria-labelledby="heading9" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterPapersEmAreaEmDepartamento('ai', 'UFMG')">área "ai", departamento "UFMG"</a><br>
                <a onClick="obterPapersEmAreaEmDepartamento('arch', 'UFMG')">área "arch", departamento "UFMG"</a><br> 
                <a onClick="obterPapersEmAreaEmDepartamento('chi', 'UFMG')">área "chi", departamento "UFMG"</a> 
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="heading10">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse10" aria-expanded="false" aria-controls="collapse10">
                10. Todos os papers de um professor (dado o seu nome)
              </button>
            </h5>
          </div>
          <div id="collapse10" class="collapse" aria-labelledby="heading10" data-parent="#accordion">
            <div class="card-body">
                <span>Selecione uma das opções:</span><br>
                <a onClick="obterPapersDeProfessor('Abel-Guilhermino-da-Silva-Filho')">professor "Abel-Guilhermino-da-Silva-Filho"</a><br>
                <a onClick="obterPapersDeProfessor('Alba-Melo')">professor "Alba-Melo"</a><br> 
                <a onClick="obterPapersDeProfessor('Bernardo-Pereira-Nunes')">professor "Bernardo-Pereira-Nunes"</a> 
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="resultados"></div>
</body>

</html>